<?xml version="1.0"?>
<block>
  <name>UDP Source (grnet)</name>
  <key>grnet_udp_source</key>
  <category>[GrNet Networking Tools]</category>
  <import>import grnet</import>
  <make>grnet.udp_source($type.size, 1, $port,$header,$payloadsize,$notifyMissed,$srcZeros)</make>
	<param>
		<name>Input Type</name>
		<key>type</key>
		<type>enum</type>
		<option>
			<name>Complex</name>
			<key>complex</key>
			<opt>size:gr.sizeof_gr_complex</opt>
		</option>
		<option>
			<name>Float</name>
			<key>float</key>
			<opt>size:gr.sizeof_float</opt>
		</option>
		<option>
			<name>Int</name>
			<key>int</key>
			<opt>size:gr.sizeof_int</opt>
		</option>
		<option>
			<name>Short</name>
			<key>short</key>
			<opt>size:gr.sizeof_short</opt>
		</option>
		<option>
			<name>Byte</name>
			<key>byte</key>
			<opt>size:gr.sizeof_char</opt>
		</option>
	</param>

	<param>
		<name>Port</name>
		<key>port</key>
		<value>2000</value>
		<type>int</type>
	</param>
	<param>
		<name>Header</name>
		<key>header</key>
		<type>enum</type>
		<option>
			<name>None</name>
			<key>0</key>
		</option>
		<option>
			<name>64-bit Sequence Number</name>
			<key>1</key>
		</option>
		<option>
			<name>Sequence + 16-bit data size</name>
			<key>2</key>
		</option>
		<option>
			<name>CHDR (64-bit, no timestamp)</name>
			<key>4</key>
		</option>
		<option>
			<name>Old ATA Header</name>
			<key>5</key>
		</option>
	</param>
	<param>
		<name>UDP Packet Data Size</name>
		<key>payloadsize</key>
		<value>1472</value>
		<type>int</type>
	</param>
	<param>
		<name>Notify Missed Frames</name>
		<key>notifyMissed</key>
		<type>enum</type>
		<option>
			<name>No</name>
			<key>False</key>
		</option>
		<option>
			<name>Yes</name>
			<key>True</key>
		</option>
	</param>
	<param>
		<name>Src 0s If No Data</name>
		<key>srcZeros</key>
		<type>enum</type>
		<option>
			<name>No</name>
			<key>False</key>
		</option>
		<option>
			<name>Yes</name>
			<key>True</key>
		</option>
	</param>
	<source>
		<name>out</name>
		<type>$type</type>
	</source>
	<doc>
	This block listens for traffic on the specified UDP port and outputs the specified data type.  Note that the header setting and payload size should match on both the sender and receiver.  For a normal network, a payload size of 1472 (1500-28 for UDP headers) represents the max size for a standard UDP packet.  For a Jumbo frames 8972 can be used (9000-28).  Be careful adjusting this parameter as you could inadvertently cause unnecessary packet fragmentation and reconstruction.
	
	If you need the block to generate 0s when theres no UDP data, you can turn on the 'Src 0s If No Data' flag, however this is best paired with the grnet UDP sink block.  If using a separate application, problems can arise if the sending application is not calling its send function with blocks matching payload size (the logic here can get a 'partial' packet after starting and not continue to produce zeros).
	</doc>
</block>
